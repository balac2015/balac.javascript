extends ../layouts/front
block header
  // iCheck
  link(rel='stylesheet', href='/plugins/iCheck/square/blue.css')

block main
  .register-box
    .register-logo
      a(href='/vendor')
        b U净
    .register-box-body
      p.login-box-msg
      form#registerForm(action='/vendor/register', method='post')
        input(type='hidden', name='_csrf', value=_csrf)

        .form-group.has-feedback
          label(for="fullname") 姓名:
            span.required *
          input.form-control(type='text',name="fullname" placeholder='务必请输入您的真实姓名',value="#{user.fullname}")
          span.glyphicon.glyphicon-user.form-control-feedback

        .form-group.has-feedback
          label(for="numberID") 身份证:
            span.required *
          input.form-control(type='text',name="numberID" placeholder='务必请输入您的真实身份证',value="#{user.numberID}")
          span.glyphicon.glyphicon-user.form-control-feedback

        .form-group.has-feedback
          label(for="mobile") 手机号码:
            span.required *
          input.form-control(type='text',name="mobile", placeholder='务必请输入您的真实手机号码',value="#{user.mobile}")
          span.glyphicon.glyphicon-phone.form-control-feedback

        .form-group.has-feedback
          label(for="email") Email:
            span.required *
          input.form-control(type='email',name="email", placeholder='Email',value="#{user.email}")
          span.glyphicon.glyphicon-envelope.form-control-feedback

        .form-group.has-feedback
          label(for="password") 登录密码:
            span.required *
          input#password.form-control(type='password',name="password", placeholder='请输入至少6位登录密码')
          span.glyphicon.glyphicon-lock.form-control-feedback

        .form-group.has-feedback
          label(for="confirmPassword") 确认新密码:
            span.required *
          input.form-control(type='password',name="confirmPassword", placeholder='确认新密码')
          span.glyphicon.glyphicon-log-in.form-control-feedback

        // /.col
        .form-group.has-feedback
          button.btn.btn-primary.btn-block.btn-flat(type='submit') 验证邮箱
          // /.col
      p
        i.fa.fa-info
        a.text-center(href='/vendor/login') &nbsp; &nbsp;我已经注册过账户，直接登录
    // /.form-box
  // /.register-box
block scripts
  script.
    $(function () {
      $("#registerForm").validate({
        rules: {
          fullname: {required: true},
          numberID: {
            required: true,
            numberID: true,
            remote: "/vendor/checkunique/numberID?ov=#{user ? user.numberID : ''}&data=" + new Date()
          },
          mobile: {
            required: true,
            mobileCN: true,
            remote: "/vendor/checkunique/mobile?ov=#{user ? user.mobile : ''}&data=" + new Date()
          },
          email: {
            required: true,
            remote: "/vendor/checkunique/email?ov=#{user ? user.email : ''}&data=" + new Date()
          },
          password: {
            required: true,
            minlength:6
          },
          confirmPassword: {required: true, equalTo: "#password"},
        },
        messages: {
          fullname: {remote: "用户名已经被注册"},
          numberID: {remote: "身份证已经被注册"},
          confirmPassword: {
            equalTo: "请输入与登录密码相同的值"
          },
          email: {remote: "邮件已经被注册"},
          mobile: {remote: "手机号码已经被注册"},
        }
      });
    });
