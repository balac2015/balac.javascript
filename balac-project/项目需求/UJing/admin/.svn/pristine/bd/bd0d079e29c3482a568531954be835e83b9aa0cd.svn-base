//
   Created by yu869 on 2015/11/9.

extends ../layouts/default
block header
  link( rel="stylesheet" href="/plugins/datatables/dataTables.bootstrap.css")
  link( rel="stylesheet" href="/plugins/select2/select2.min.css")
//应用的page title
block pageTitle
  h1 设备
    if viewType == "add"
      small 设备类型新增
    else
      small 设备类型修改
block main
  .box.box-primary
    .box-header.with-border
      if viewType == "add"
        h3.box-title 新增设备类型信息
      else
        h3.box-title 编辑设备类型信息
      .box-tools.pull-right
        a.btn.btn-xs.btn-default(href='/store/priceSet' title='返回')
          i.fa.fa-reply
          span 返回
        | &nbsp;&nbsp;
        button#save.btn.btn-xs.btn-default(title='保存')
          i.fa.fa-save
          span 保存
        | &nbsp;
    .panel-body
      div#deviceEdit.row
        div.col-md-12
          form#deviceForm.form-horizontal(name='deviceForm', action='/store/saveDevice', method='post')
            input#id(type='hidden', name='id', value="#{devicePrice != null ? devicePrice._id : ''}")
            input#_csrf(type='hidden', name='_csrf', value=_csrf)
            div.row.form-group
              label.control-label.col-sm-2 设备:
              div.col-sm-9
                input#type.form-control(type='text',name='type',placeholder='设备名称',value="#{devicePrice == null ? '' : devicePrice.type}")

            div.row.form-group
              label.control-label.col-sm-2 简称:
              div.col-sm-9
                input#shortName.form-control(type='text',name='shortName',placeholder='设备简称',value="#{devicePrice == null ? '' : devicePrice.shortName}")




//应用添加的脚本在scripts block中定义
block scripts
  script(src='/plugins/datatables/jquery.dataTables.min.js')
  script(src='/plugins/datatables/dataTables.bootstrap.min.js')
  script.
    $(document).ready(function () {
      var form = $('#deviceForm');
      $("#save").on('click', function () {
        form.submit();
      });

      form.validate({
        rules: {
          type: {
            required: true
          },
          shortName: {
            required: true
            ,maxlength : 1
          }
        },
        messages: {
          type: "设备名称必填！"
          ,shortName : {
            required : "简称必填"
            ,maxlength: "只允许填入一个字"
          }
        }
      });
    });
