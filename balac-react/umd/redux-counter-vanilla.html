<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Redux basic example</title>
        <script src="../node_modules/redux/dist/redux.js"></script>
    </head>
    <body>
        <p>
            Clicked: <span id="value">0</span> times
            <button id="increment">+</button>
            <button id="decrement">-</button>
            <button id="incrementIfOdd">Increment if odd</button>
            <button id="incrementAsync">Increment async</button>
        </p>
        <script type="text/javascript">

            var store = Redux.createStore(counter);
            var valueEl = document.getElementById('value');

            render();
            store.subscribe(render);

            function counter (state, action) {
                if (typeof state === 'undefined') {
                    return 0;
                }
                switch (action.type) {
                    case 'INCREMENT': return state + 1;
                    case 'DECREMENT': return state - 1;
                    default: return state;
                }
            }

            function render () {
                console.log( store.getState() )
                valueEl.innerHTML = store.getState().toString();
            }

            document.getElementById('increment')
                .addEventListener('click', function () {
                    store.dispatch({ type: 'INCREMENT' });
                });

            document.getElementById('decrement')
                .addEventListener('click', function () {
                    store.dispatch({ type: 'DECREMENT' });
                });

            document.getElementById('incrementIfOdd')
                .addEventListener('click', function () {
                    if (store.getState() % 2 !== 0) {
                        store.dispatch({ type: 'INCREMENT' });
                    }
                });

            document.getElementById('incrementAsync')
                .addEventListener('click', function () {
                    setTimeout(function () {
                        store.dispatch({ type: 'INCREMENT' });
                    }, 1000);
                });

        </script>
    </body>
</html>
